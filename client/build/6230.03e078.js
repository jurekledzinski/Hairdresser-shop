(self.webpackChunkbarbershop=self.webpackChunkbarbershop||[]).push([[6230],{86230:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var a=n(67154),r=n.n(a),i=n(87757),c=n.n(i),o=n(319),s=n.n(o),m=n(48926),l=n.n(m),p=n(63038),u=n.n(p),d=n(67294),h=n(84751),f=n(62598),_=n(73406),b=(n(82580),n(64697)),v=n(76213),O=function(){return{initialValues:{day:"",time:""},validationSchema:v.Ry({day:v.Z_().required("Day is required"),time:v.Z_().required("Time is required")})}},y=n(22584),E=n(16431),S=n(73680),N=(n(79471),n(59713)),w=n.n(N),g=(n(65407),function(){return{initialValues:{day:"",time:""},validationSchema:v.Ry({day:v.Z_().required("Title is required"),time:v.Z_().required("Price is required")})}}),j=n(65467);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){var t=e.currentOpenShop,n=e.idRow,a=e.setCurrentOpenShop,r=e.setIsVisiblePanel,i={day:e.day,time:e.time},o=(0,d.useState)(i),s=u()(o,2),m=s[0],p=s[1],b=g(),v=b.initialValues,O=b.validationSchema;(0,y.Z)();var E=(0,h.I0)(),S=(0,h.v9)((function(e){return e.useAdminData})),N=function(){var e=l()(c().mark((function e(i,o){var s,m,l,u,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.id=n,e.next=3,(0,j.yf)(i);case 3:s=e.sent,m=s.data,l=s.status,u=m.openshop,200!==l?E((0,_.PA)(m.alert,"default")):(E((0,_.Ob)(m.success,"default")),r(!1),d=t.map((function(e){return e._id===u._id?x(x({},e),{},{day:u.day,time:u.time}):e})),a(d),h={day:u.day,time:u.time},p(h)),o.resetForm();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){return d.createElement("p",{className:"admin-shop__error-msg-edit"},e.children)};return d.createElement(f.J9,{enableReinitialize:!0,initialValues:m||v,validationSchema:O,validateOnBlur:!1,onSubmit:N},(function(e){return d.createElement("div",{className:"admin-shop__edit-form-wrapper"},d.createElement(f.l0,{className:"admin-shop__form-edit",onSubmit:e.handleSubmit},d.createElement(f.Bc,{name:"day",component:w}),d.createElement(f.gN,{type:"text",name:"day",className:"admin-shop__form-input",placeholder:"Day"}),d.createElement(f.Bc,{name:"time",component:w}),d.createElement(f.gN,{type:"text",name:"time",className:"admin-shop__form-input",placeholder:"Time"}),d.createElement("button",{className:"admin-shop__button-add-image",type:"submit",disabled:!S.enableOpenShop||!e.isValid},"Edit Open Time")))}))},I=function(e){var t=e._id,n=e.idOpenShop,a=e.currentOpenShop,r=e.setCurrentOpenShop,i=e.setIdOpenShop,c=e.setIsOpenModal,o=e.day,s=e.time,m=(0,d.useState)(""),l=u()(m,2),p=l[0],h=l[1],f=(0,d.useState)(!1),_=u()(f,2),b=_[0],v=_[1];return d.createElement("div",{className:"admin-shop__row"},d.createElement("div",{className:"admin-shop__row-service"},d.createElement("div",{className:"admin-shop__text-wrapper"},d.createElement("p",{className:"admin-shop__text-span-1"},"Day:"),d.createElement("p",{className:"admin-shop__text-1"}," ",o)),d.createElement("div",{className:"admin-shop__text-wrapper"},d.createElement("p",{className:"admin-shop__text-span-2"},"Time:"),d.createElement("p",{className:"admin-shop__text-2"},s)),d.createElement("div",{className:"admin-shop__buttons-wrapper"},d.createElement("button",{className:b?"admin-shop__edit admin-shop__edit--active":"admin-shop__edit",onClick:function(){v((function(e){return!e})),i(""),h(t)}},d.createElement("i",{className:"far fa-edit"})),d.createElement("button",{className:n===p&&n&&""!==p?"admin-shop__delete admin-shop__delete--active":"admin-shop__delete",onClick:function(){h(t),i(t),c(!0),v(!1)}},d.createElement("i",{className:"far fa-trash-alt"})))),d.createElement("div",{className:b?"admin-shop__panel-edit admin-shop__panel-edit--active":"admin-shop__panel-edit"},d.createElement(D,{currentOpenShop:a,setCurrentOpenShop:r,setIsVisiblePanel:v,idRow:p,day:o,time:s})))};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var A=function(e,t,n,a){var r=(0,h.I0)(),i=function(){var t=[];return e.forEach((function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);t=[].concat(s()(t),[n])})),t};return{handleRemoveItem:function(){var e=l()(c().mark((function e(){var o,s,m,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.Ef)(t);case 2:o=e.sent,s=o.data,200===o.status?(r((0,_.Ob)(s.success,"removeAtTableAdmin")),m=i(),l=m.filter((function(e){return e._id!==t})),n(l),a(!1)):r((0,_.PA)(s.alert,"removeAtTableAdmin"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},T=function(){var e=O(),t=e.initialValues,n=e.validationSchema;(0,y.Z)();var a=(0,h.I0)(),i=(0,h.v9)((function(e){return e.useAdminData})),o=(0,h.v9)((function(e){return e.alertData})),m=(0,h.v9)((function(e){return e.openShopData})).shop,p=(0,d.useState)([]),v=u()(p,2),N=v[0],w=v[1],g=(0,d.useState)(""),P=u()(g,2),x=P[0],D=P[1],k=(0,d.useState)(!1),T=u()(k,2),V=T[0],B=T[1],R=A(N,x,w,B).handleRemoveItem,q=function(){var e=l()(c().mark((function e(t,n){var r,i,o,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.Ie)(t);case 2:r=e.sent,i=r.data,o=r.status,delete(m=i.openshop).__v,200!==o?a((0,_.PA)(i.alert,"default")):(a((0,_.Ob)(i.success,"default")),w([].concat(s()(N),[m]))),n.resetForm();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){B(!1),D("")};(0,d.useEffect)((function(){a((0,b.lc)())}),[a]),(0,d.useEffect)((function(){w(m)}),[m]);var Z=function(e){return d.createElement("p",{className:"admin-shop__error-msg"},e.children)};return d.createElement(f.J9,{initialValues:t,validationSchema:n,onSubmit:q},(function(e){return d.createElement("article",{className:"admin-shop"},d.createElement("div",{className:"admin-shop__wrapper"},(!Boolean(Object.keys(e.errors).length)&&o.errorServerMsg,d.createElement(E.Z,null)),Boolean(N)&&N.length<7&&d.createElement(f.l0,{className:"admin-shop__wrapper-form-add",onSubmit:e.handleSubmit},d.createElement(f.Bc,{name:"day",component:Z}),d.createElement(f.gN,{type:"text",name:"day",className:"admin-shop__form-input",placeholder:"Day"}),d.createElement(f.Bc,{name:"time",component:Z}),d.createElement(f.gN,{type:"text",name:"time",className:"admin-shop__form-input",placeholder:"Time"}),d.createElement("button",{className:"admin-shop__button-add-image",type:"submit",disabled:!i.enableOpenShop||!e.isValid},"Add Open Time")),d.createElement("div",{className:"admin-shop__header"},d.createElement("p",{className:"admin-shop__number"},"Total number:"," ",Boolean(N)?N.length:null),d.createElement("p",{className:"admin-shop__action"},"Action")),d.createElement("div",{className:"admin-shop__wrapper-images"},Boolean(N)&&N.map((function(e,t){return d.createElement(I,r()({key:e._id},e,{setIdOpenShop:D,idOpenShop:x,setIsOpenModal:B,currentOpenShop:N,setCurrentOpenShop:w}))})))),d.createElement(S.Z,{enableAction:i.enableOpenShop,isOpenModal:V,handleRemoveItem:R,handleNotRemoveItem:C,purpose:"day"}))}))}},82580:function(){},65407:function(){},79471:function(){}}]);