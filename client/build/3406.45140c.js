(self.webpackChunkbarbershop=self.webpackChunkbarbershop||[]).push([[3406],{51309:function(e,t,a){"use strict";a.r(t);var n=a(87757),r=a.n(n),s=a(48926),i=a.n(s),o=a(63038),c=a.n(o),l=a(67294),m=a(16550),u=a(84751),b=a(62598),g=a(97894),p=(a(58742),a(73406)),k=a(65467),f=a(92723),d=a(97004),h=a(7648),v=a(43677),_=a(16431);t.default=function(){var e=(0,v.Z)(),t=e.initialValues,a=e.validationSchema,n=(0,u.I0)(),s=(0,u.v9)((function(e){return e.alertData})),o=(0,u.v9)((function(e){return e.orderDetailsData})),E=(0,u.v9)((function(e){return e.singleExcludedTimeData})),D=(0,l.useState)(null),N=c()(D,2),P=N[0],w=N[1],x=(0,m.k6)(),y=function(){var e=i()(r().mark((function e(t,a){var s,i,l,m,u,b,g,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=o).agreePolicy=t.agreePolicy,e.next=4,(0,k.mv)(s);case 4:return i=c()(E,1),l=i[0],e.next=7,(0,k.oT)(l);case 7:return m={bookingId:o.bookingId,services:o.services},e.next=10,(0,k.I6)(m);case 10:if(u=e.sent,b=u.data,200!==u.status){e.next=19;break}return e.next=16,P.redirectToCheckout({sessionId:b.sessionId});case 16:g=e.sent,(f=g.error).message&&n((0,p.PA)(f.message,"registerForm"));case 19:a.setSubmitting(!1),a.resetForm();case 21:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){sessionStorage.getItem("page")&&x.push("/booking"),sessionStorage.setItem("page",!0)}),[]);var I=function(){var e=i()(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.loadStripe)("pk_test_51HK927EW1gldDKWc0QVK2ehsteG1SDRe8BPAhkbCbIKfwFJPMbqiBeKGtbihghlcC6TphYpeLZfrPdy7wo3100a7008JnQvZi1");case 2:t=e.sent,w(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){I()}),[]);var S=function(){x.push("/booking")},C=function(e){return l.createElement("p",{className:"booking__error-msg"},e.children)};return l.createElement(b.J9,{initialValues:t,validationSchema:a,onSubmit:y},(function(e){return l.createElement("section",{className:"bookingDetails"},l.createElement("div",{className:"bookingDetails__center-wrapper"},l.createElement("button",{className:"booking__button-go-back",onClick:S},"Go back"),l.createElement("div",{className:"bookingDetails__wrapper"},l.createElement("div",{className:"bookingDetails__left"}),l.createElement("div",{className:"bookingDetails__right"},l.createElement("div",{className:"bookingDetails__inside-wrapper"},l.createElement("h2",{className:"bookingDetails__title"},"Booking details"),l.createElement("div",{className:"bookingDetails__details"},l.createElement(f.Z,{email:o.email,date:o.date,hairdresserName:o.hairdresserName,name:o.name,phone:o.phone}),l.createElement(h.Z,{services:o.services}),l.createElement(d.Z,{totalPrice:Boolean(o.totalPrice)&&o.totalPrice,subTotalPrice:o.subTotalPrice}),l.createElement(b.l0,{className:"bookingDetails__confirm-terms-shop"},(!Boolean(Object.keys(e.errors).length)&&s.errorServerMsg,l.createElement(_.Z,null)),l.createElement(b.Bc,{name:"agreePolicy",component:C}),l.createElement("label",{className:"bookingDetails__confirm-terms",htmlFor:"agree"},l.createElement(b.gN,{name:"agreePolicy",className:"bookingDetails__confirm-checkbox",type:"checkbox",id:"agree"}),"I agree with terms policy of Hair planet shop"),l.createElement("button",{className:"bookingDetails__button-checkout",type:"submit",disabled:!e.isValid},"Checkout"))))))))}))}},58742:function(){}}]);