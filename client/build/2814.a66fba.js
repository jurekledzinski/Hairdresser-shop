(self.webpackChunkbarbershop=self.webpackChunkbarbershop||[]).push([[2814],{72814:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return U}});var t=a(50008),r=a.n(t),l=a(87757),i=a.n(l),s=a(48926),c=a.n(s),o=a(63038),u=a.n(o),m=a(67294),f=a(84751),p=a(62598),d=(a(42435),a(73406)),b=a(32528),_=a(52364),E=a(76213),v=function(){var e=["image/png","image/jpeg"];return{initialValues:{name:"",lastName:"",email:"",fileImg:"",password:"",confirmPassword:""},validationSchema:E.Ry({name:E.Z_().required("Name is required"),lastName:E.Z_().required("LastName is required"),email:E.Z_().email("Invalid email").required("Email required"),password:E.Z_().required("Password required"),confirmPassword:E.Z_().when("password",{is:function(e){return!!(e&&e.length>0)},then:E.Z_().oneOf([E.iH("password")],"Both passwords have to be the same")}),fileImg:E.nK().required("Image is required").test("fileSize","Image is too large, use very small one",(function(e){return e&&e.size<=7500})).test("fileFormat","Please use image type png or jpeg",(function(n){return n&&e.includes(n.type)}))})}},N=a(22584),g=a(60835),h=["image/png","image/jpeg"],S=function(){var e=(0,f.I0)();return{handleFileEdit:function(n,a,t){t("fileImg");var r=(new Date).getTime().toString(),l=n.target.files[0];Object.defineProperty(l,"name",{value:l.name,writable:!0}),l.name="".concat(l.name,"-").concat(r),a("fileImg",l),Boolean(l)&&h.includes(l.type)&&l.size<=7500?e((0,g.Hj)(null,null,null,null,l,null,null)):e((0,g.jF)(null,null,null,null,null,null,null))}}},w=a(27285),O=a(72323),k=a(16431),P=a(41691),y=a(65467),j=(a(3775),a(48336)),I=function(){var e=(0,f.I0)(),n=(0,f.v9)((function(e){return e.useAdminData})),a=(0,f.v9)((function(e){return e.alertData})),t=(0,f.v9)((function(e){return e.permissionData})).permission,r=(0,m.useState)(!1),l=u()(r,2),s=l[0],o=l[1],p=(0,m.useState)(!0),b=u()(p,2),_=b[0],E=b[1];(0,N.Z)();var v=function(){var n=c()(i().mark((function n(a){var t,r,l,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),t={enableRegisterForm:s},n.next=4,(0,y.mT)(t);case 4:r=n.sent,l=r.data,c=r.status,e(200===c?(0,d.Ob)(l.success,"enableRegister"):(0,d.PA)(l.alert,"enableRegister")),E(!0);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,m.useEffect)((function(){e((0,j.mW)())}),[]),(0,m.useEffect)((function(){if(t.length>0){var e=u()(t,1)[0];o(e.enableRegisterForm)}}),[t]),m.createElement("div",{className:"admin-profile__enable-register"},(a.errorServerMsg,"enableRegister"===a.where&&m.createElement(k.Z,null)),m.createElement("form",{className:"admin-profile__permission-register",onSubmit:v},m.createElement("label",{htmlFor:"enableRegister",className:"admin-profile__enable-label"},m.createElement("input",{type:"checkbox",id:"enableRegister",className:"admin-profile__enable-input",onChange:function(){o((function(e){return!e})),E(!1)},checked:s}),"Enable registration"),!_&&m.createElement("button",{className:"admin-profile__button-confirm",disabled:!n.enablePermission},"Confirm")))},B=a(59713),C=a.n(B),D=a(44586),F=(a(11273),a(9533)),A=a(73680),R=function(e,n,a,t,r,l,i,s,c,o,u,m,f,p,d,b,_,E,v,N,g,h,S,w,O,k,P,y,j,I,B,C,D,F,A,R,x,Z,q,G,V,H,T,U,z,M,Y,L){return{inputsPermissions:[{labelName:"Enable book",id1:"enableBook1",id2:"enableBook2",id3:"enableBook3",enable1:e,enable2:n,enable3:a,callback1:function(){return O((function(e){return!e}))},callback2:function(){return k((function(e){return!e}))},callback3:function(){return P((function(e){return!e}))}},{labelName:"Enable cancel",id1:"enableCancel1",id2:"enableCancel2",id3:"enableCancel3",enable1:t,enable2:r,enable3:l,callback1:function(){return y((function(e){return!e}))},callback2:function(){return j((function(e){return!e}))},callback3:function(){return I((function(e){return!e}))}},{labelName:"Enable delete email",id1:"enableEmail1",id2:"enableEmail2",id3:"enableEmail3",enable1:i,enable2:s,enable3:c,callback1:function(){return B((function(e){return!e}))},callback2:function(){return C((function(e){return!e}))},callback3:function(){return D((function(e){return!e}))}},{labelName:"Enable add/delete/edit image",id1:"enableImage1",id2:"enableImage2",id3:"enableImage3",enable1:o,enable2:u,enable3:m,callback1:function(){return F((function(e){return!e}))},callback2:function(){return A((function(e){return!e}))},callback3:function(){return R((function(e){return!e}))}},{labelName:"Enable delete opinion",id1:"enableOpinion1",id2:"enableOpinion2",id3:"enableOpinion3",enable1:f,enable2:p,enable3:d,callback1:function(){return x((function(e){return!e}))},callback2:function(){return Z((function(e){return!e}))},callback3:function(){return q((function(e){return!e}))}},{labelName:"Enable add/delete/edit open hours",id1:"enableOpenHours1",id2:"enableOpenHours2",id3:"enableOpenHours3",enable1:b,enable2:_,enable3:E,callback1:function(){return G((function(e){return!e}))},callback2:function(){return V((function(e){return!e}))},callback3:function(){return H((function(e){return!e}))}},{labelName:"Enable add/delete/edit services",id1:"enableServices1",id2:"enableServices2",id3:"enableServices3",enable1:v,enable2:N,enable3:g,callback1:function(){return T((function(e){return!e}))},callback2:function(){return U((function(e){return!e}))},callback3:function(){return z((function(e){return!e}))}},{labelName:"Enable permissions",id1:"enablePermissions1",id2:"enablePermissions2",id3:"enablePermissions3",enable1:h,enable2:S,enable3:w,callback1:function(){return M((function(e){return!e}))},callback2:function(){return Y((function(e){return!e}))},callback3:function(){return L((function(e){return!e}))}}]}},x=a(319),Z=a.n(x);function q(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}var G=function(e,n,a,t){var r=(0,f.I0)(),l=function(){var n=[];return e.forEach((function(e){var a=function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?q(Object(a),!0).forEach((function(n){C()(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}({},e);n=[].concat(Z()(n),[a])})),n};return{handleRemoveItem:function(){var e=c()(i().mark((function e(){var s,c,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.jP)(n);case 2:s=e.sent,c=s.data,200===s.status?(r((0,d.Ob)(c.success,"permissionAdmin")),o=l(),u=o.filter((function(e){return e._id!==n})),a(u),t(!1)):r((0,d.PA)(c.alert,"permissionAdmin"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}};function V(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function H(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?V(Object(a),!0).forEach((function(n){C()(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var T=function(){var e=(0,f.I0)(),n=(0,f.v9)((function(e){return e.useAdminData})),a=(0,f.v9)((function(e){return e.adminsData})).admins,t=(0,m.useState)([]),r=u()(t,2),l=r[0],s=r[1],o=(0,m.useState)(""),p=u()(o,2),b=p[0],E=p[1],v=(0,m.useState)(!1),g=u()(v,2),h=g[0],S=g[1],w=(0,m.useState)(!1),O=u()(w,2),k=O[0],P=O[1],j=G(l,b,s,P).handleRemoveItem;(0,N.Z)();var I=(0,m.useState)(!1),B=u()(I,2),C=B[0],x=B[1],Z=(0,m.useState)(!1),q=u()(Z,2),V=q[0],T=q[1],U=(0,m.useState)(!1),z=u()(U,2),M=z[0],Y=z[1],L=(0,m.useState)(!1),J=u()(L,2),K=J[0],Q=J[1],W=(0,m.useState)(!1),X=u()(W,2),$=X[0],ee=X[1],ne=(0,m.useState)(!1),ae=u()(ne,2),te=ae[0],re=ae[1],le=(0,m.useState)(!1),ie=u()(le,2),se=ie[0],ce=ie[1],oe=(0,m.useState)(!1),ue=u()(oe,2),me=ue[0],fe=ue[1],pe=(0,m.useState)(!1),de=u()(pe,2),be=de[0],_e=de[1],Ee=(0,m.useState)(!1),ve=u()(Ee,2),Ne=ve[0],ge=ve[1],he=(0,m.useState)(!1),Se=u()(he,2),we=Se[0],Oe=Se[1],ke=(0,m.useState)(!1),Pe=u()(ke,2),ye=Pe[0],je=Pe[1],Ie=(0,m.useState)(!1),Be=u()(Ie,2),Ce=Be[0],De=Be[1],Fe=(0,m.useState)(!1),Ae=u()(Fe,2),Re=Ae[0],xe=Ae[1],Ze=(0,m.useState)(!1),qe=u()(Ze,2),Ge=qe[0],Ve=qe[1],He=(0,m.useState)(!1),Te=u()(He,2),Ue=Te[0],ze=Te[1],Me=(0,m.useState)(!1),Ye=u()(Me,2),Le=Ye[0],Je=Ye[1],Ke=(0,m.useState)(!1),Qe=u()(Ke,2),We=Qe[0],Xe=Qe[1],$e=(0,m.useState)(!1),en=u()($e,2),nn=en[0],an=en[1],tn=(0,m.useState)(!1),rn=u()(tn,2),ln=rn[0],sn=rn[1],cn=(0,m.useState)(!1),on=u()(cn,2),un=on[0],mn=on[1],fn=(0,m.useState)(!1),pn=u()(fn,2),dn=pn[0],bn=pn[1],_n=(0,m.useState)(!1),En=u()(_n,2),vn=En[0],Nn=En[1],gn=(0,m.useState)(!1),hn=u()(gn,2),Sn=hn[0],wn=hn[1],On=(0,m.useRef)(),kn=(0,m.useRef)(),Pn=(0,m.useRef)(),yn=R(C,V,M,K,$,te,se,me,be,Ne,we,ye,Ce,Re,Ge,Ue,Le,We,nn,ln,un,dn,vn,Sn,x,T,Y,Q,ee,re,ce,fe,_e,ge,Oe,je,De,xe,Ve,ze,Je,Xe,an,sn,mn,bn,Nn,wn).inputsPermissions,jn=function(){var a=c()(i().mark((function a(t,r){var c,o,u,m,f,p,b,E;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),c={id:On.current,enableBook:C,enableCancel:K,enableEmails:se,enableGallery:Ne,enableOpinions:Ce,enableOpenShop:Ue,enableServices:nn,enablePermission:dn},o={id:kn.current,enableBook:V,enableCancel:$,enableEmails:me,enableGallery:we,enableOpinions:Re,enableOpenShop:Le,enableServices:ln,enablePermission:vn},u={id:Pn.current,enableBook:M,enableCancel:te,enableEmails:be,enableGallery:ye,enableOpinions:Ge,enableOpenShop:We,enableServices:un,enablePermission:Sn},a.next=6,(0,y.aq)(On.current===r?c:kn.current===r?o:(Pn.current,u));case 6:m=a.sent,f=m.data,p=m.status,b=f.permissions,200!==p?e((0,d.PA)(f.alert,"permissionAdmin")):(e((0,d.Ob)(f.success,"permissionAdmin")),E=l.map((function(e){return e._id===r?H(H({},e),{},{enableBook:b.enableBook,enableCancel:b.enableCancel,enableEmails:b.enableEmails,enableGallery:b.enableGallery,enableOpenShop:b.enableOpenShop,enableOpinions:b.enableOpinions,enableServices:b.enableServices,enablePermission:b.enablePermission}):e})),s(E),n.userId===b._id&&e((0,_.QB)(b))),S((function(e){return!e}));case 12:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}(),In=function(){var e=c()(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(n),P(!0);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){e((0,F.vt)())}),[h,e]),(0,m.useEffect)((function(){if(a.length>0){s(a);var e=u()(a,3),n=e[0],t=e[1],r=e[2];Boolean(n)&&(On.current=n._id,x(n.enableBook),Q(n.enableCancel),ce(n.enableEmails),ge(n.enableGallery),ze(n.enableOpenShop),De(n.enableOpinions),an(n.enableServices),bn(n.enablePermission)),Boolean(t)&&(kn.current=t._id,T(t.enableBook),ee(t.enableCancel),fe(t.enableEmails),Oe(t.enableGallery),Je(t.enableOpenShop),xe(t.enableOpinions),sn(t.enableServices),Nn(t.enablePermission)),Boolean(r)&&(Pn.current=r._id,Y(r.enableBook),re(r.enableCancel),_e(r.enableEmails),je(r.enableGallery),Xe(r.enableOpenShop),Ve(r.enableOpinions),mn(r.enableServices),wn(r.enablePermission))}}),[a.length]),m.createElement(m.Fragment,null,l.map((function(e){return m.createElement("div",{className:"admin-profile__users",key:e._id},m.createElement("div",{className:"admin-profile__left-users"},m.createElement("p",{className:"admin-profile__title-registered"},"Register ",e.role),m.createElement("div",{className:"admin-profile__user-wrapper"},m.createElement("p",{className:"admin-profile__name-user"},"Name: ",e.name),m.createElement("p",{className:"admin-profile__email-user"},"Email: ",e.email),m.createElement("button",{className:"admin-profile__delete-user",onClick:function(){return In(e._id)},disabled:"Super Admin"===e.role},"Delete"))),m.createElement("div",{className:"admin-profile__right-users"},m.createElement("p",{className:"admin-profile__title-permissions"},"Permissions"),m.createElement("form",{className:"admin-profile__form-permission",onSubmit:function(n){return jn(n,e._id)}},m.createElement("div",{className:"admin-profile__inputs-wrapper"},yn.map((function(n){return m.createElement("label",{htmlFor:On.current===e._id?n.id1:kn.current===e._id?n.id2:(Pn.current,e._id,n.id3),className:"admin-profile__label-user",key:(0,D.Z)()},m.createElement("input",{type:"checkbox",className:"admin-profile__input-permission",id:On.current===e._id?n.id1:kn.current===e._id?n.id2:(Pn.current,e._id,n.id3),checked:On.current===e._id&&n.enable1||kn.current===e._id&&n.enable2||Pn.current===e._id&&n.enable3,onChange:On.current===e._id?n.callback1:kn.current===e._id?n.callback2:(Pn.current,e._id,n.callback3)}),n.labelName)}))),m.createElement("button",{className:"admin-profile__button-permission-confirm",disabled:!n.enablePermission},"Confirm"))))})),m.createElement(A.Z,{enableAction:n.enablePermission,isOpenModal:k,handleRemoveItem:j,handleNotRemoveItem:function(){P(!1)},purpose:"admin"}))},U=function(){var e=v(),n=e.initialValues,a=e.validationSchema;(0,N.Z)();var t=S().handleFileEdit,l=(0,O.Z)().deleteImgFirebase,s=(0,f.I0)(),o=(0,f.v9)((function(e){return e.useAdminData})),E=(0,f.v9)((function(e){return e.userData})),g=(0,f.v9)((function(e){return e.alertData})),h=(0,f.v9)((function(e){return e.fileDate})),j=(0,m.useState)(null),B=u()(j,2),C=B[0],D=B[1],F=(0,m.useState)(""),A=u()(F,2),R=A[0],x=A[1],Z=(0,m.useState)(!1),q=u()(Z,2),G=q[0],V=q[1],H=(0,m.useState)(null),U=u()(H,2),z=U[0],M=U[1],Y=(0,m.useRef)(null);(0,w.Z)(Y);var L=function(){var e=c()(i().mark((function e(n,a){var t,r,c,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete n.fileImg,Boolean(Y.current)&&(n.imageUrl=Y.current,n.id=E.users.userId),e.next=4,(0,y.m1)(n);case 4:t=e.sent,r=t.data,c=t.status,delete r.updateAdmin.__v,o=r.updateAdmin,200!==c?(s((0,d.PA)(r.alert,"adminProfileEdit")),M(null)):(s((0,d.Ob)(r.success,"adminProfileEdit")),s((0,_.rd)(o)),M(null),u={name:o.name,lastName:o.lastName,email:o.email,imageUrl:"",password:"",confirmPassword:""},D(u)),l(R),Y.current=null,a.resetForm(),x("");case 14:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){Boolean(h.fileImageEditProfile)&&M(h.fileImageEditProfile.name)}),[h]),(0,m.useEffect)((function(){s((0,b.uh)())}),[]),(0,m.useEffect)((function(){var e=E.users;if(!Array.isArray(e)&&"object"===r()(e)){var n=E.users,a={name:n.user,lastName:n.lastName,email:n.email,fileImg:"",password:"",confirmPassword:""};D(a),x(n.imageUrl)}}),[E]);var J=function(e){var n=e.target,a=n.type,t=n.value;"text"===a&&""===t&&V(!1)},K=function(){V((function(e){return!e}))},Q=function(e){var n=e.setFieldValue,a=e.setFieldTouched;return m.createElement("input",{type:"file",onChange:function(e){return t(e,n,a)},className:"admin-profile__input-file"})},W=function(e){return m.createElement("p",{className:"admin-profile__error-msg"},e.children)};return m.createElement("article",{className:"admin-profile"},(g.errorServerMsg,"permissionAdmin"===g.where&&m.createElement(k.Z,null)),m.createElement("div",{className:o.enablePermission?"admin-profile__wrapper":"admin-profile__wrapper admin-profile__wrapper--center"},m.createElement("div",{className:o.enablePermission?"admin-profile__left-side":"admin-profile__left-side admin-profile__left-side--expand"},m.createElement("div",{className:o.enablePermission?"admin-profile__wrapper-title":"admin-profile__wrapper-title admin-profile__wrapper-title--shrink"},m.createElement("p",{className:"admin-profile__title"},"Update profile")),m.createElement(p.J9,{enableReinitialize:!0,initialValues:C||n,validationSchema:a,onSubmit:L},(function(e){return m.createElement("section",{className:"admin-profile__edit"},m.createElement("div",{className:"admin-profile__edit-wrapper"},m.createElement("div",{className:"admin-profile__inner-wrapper"},m.createElement(p.l0,{className:"admin-profile__form"},Boolean(h.fileImageEditProfile)&&m.createElement(P.Z,{imgLink:Y}),(!Boolean(Object.keys(e.errors).length)&&g.errorServerMsg,"adminProfileEdit"===g.where&&m.createElement(k.Z,null)),m.createElement("div",{className:"admin-profile__input-wrapper-name-surname"},m.createElement("div",{className:"admin-profile__wrapper-name"},m.createElement(p.Bc,{name:"name",component:W}),m.createElement("label",{className:"admin-profile__label"},"First name"),m.createElement(p.gN,{className:"admin-profile__input",name:"name",type:"text",placeholder:"Your name"}),m.createElement("span",{className:"admin-profile__icon"},m.createElement("i",{className:"far fa-user"}))),m.createElement("div",{className:"admin-profile__wrapper-surname"},m.createElement(p.Bc,{name:"lastName",component:W}),m.createElement("label",{className:"admin-profile__label"},"Last name"),m.createElement(p.gN,{className:"admin-profile__input",name:"lastName",type:"text",placeholder:"Your last name"}),m.createElement("span",{className:"admin-profile__icon"},m.createElement("i",{className:"far fa-user"})))),m.createElement("div",{className:"admin-profile__input-wrapper"},m.createElement(p.Bc,{name:"email",component:W}),m.createElement("label",{className:"admin-profile__label"},"Email"),m.createElement(p.gN,{className:"admin-profile__input",name:"email",type:"email",placeholder:"Your email"}),m.createElement("span",{className:"admin-profile__icon"},m.createElement("i",{className:"far fa-envelope"}))),m.createElement("div",{className:"admin-profile__input-file-add"},m.createElement(p.Bc,{name:"fileImg",component:W}),m.createElement("label",{className:"admin-profile__label-file"},"Choose File",m.createElement(p.gN,{as:Q,name:"fileImg",type:"file",setFieldValue:e.setFieldValue,setFieldTouched:e.setFieldTouched})),z?m.createElement("span",{className:"admin-profile__file-name"},z):m.createElement("span",{className:"admin-profile__file-name"},"No file ...")),m.createElement("div",{className:"admin-profile__input-wrapper"},m.createElement(p.Bc,{name:"password",component:W}),m.createElement("label",{className:"admin-profile__label"},"Password"),m.createElement(p.gN,{className:"admin-profile__input",name:"password",type:"text",placeholder:"Your password"}),m.createElement("span",{className:"admin-profile__icon"},m.createElement("i",{className:"fas fa-lock"}))),m.createElement("div",{className:"admin-profile__input-wrapper"},m.createElement(p.Bc,{name:"confirmPassword",component:W}),m.createElement("label",{className:"admin-profile__label"},"Confirm Password"),m.createElement(p.gN,{className:"admin-profile__input",name:"confirmPassword",type:G?"text":"password",placeholder:"Confirm password",onClick:J}),m.createElement("span",{className:"admin-profile__icon",onClick:K},G?m.createElement("i",{className:"far fa-eye-slash"}):m.createElement("i",{className:"fas fa-eye"}))),m.createElement("button",{className:"admin-profile__button-update",type:"submit",disabled:!e.isValid},"Update Profile")))))}))),o.enablePermission&&m.createElement("div",{className:"admin-profile__right-side"},m.createElement("div",{className:"admin-profile__wrapper-title"},m.createElement("p",{className:"admin-profile__title"},"Control premission")),m.createElement(I,null),m.createElement(T,null))))}},42435:function(){},3775:function(){},11273:function(){}}]);