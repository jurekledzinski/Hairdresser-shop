(self.webpackChunkbarbershop=self.webpackChunkbarbershop||[]).push([[9464],{9464:function(e,t,a){"use strict";a.r(t);var r=a(87757),n=a.n(r),s=a(48926),l=a.n(s),i=a(63038),c=a.n(i),m=a(67294),u=a(16550),o=a(73727),g=a(84751),p=a(60835),f=a(73406),_=a(62598),d=a(76213),E=(a(96222),a(65467)),N=a(41691),v=a(49819),h=a(27285),b=a(16431),w=a(35248),y=a(6841),S=["image/png","image/jpeg"];t.default=(0,u.EN)((function(){var e=(0,g.I0)(),t=(0,g.v9)((function(e){return e.fileDate})),a=(0,g.v9)((function(e){return e.alertData})),r=(0,m.useState)(!1),s=c()(r,2),i=s[0],k=s[1],F=(0,m.useState)(null),I=c()(F,2),B=I[0],Z=I[1],P=(0,m.useState)(!1),q=c()(P,2),x=q[0],T=q[1],C=(0,u.k6)(),R=(0,m.useRef)(null),j=(0,m.useRef)(null),M=(0,m.useRef)(null),V=(0,w.Z)("https://firebasestorage.googleapis.com/v0/b/hairdress-shop.appspot.com/o/Background-register.jpg?alt=media&token=1aaaebea-8a46-4dd2-bed2-f6b55509fb37");(0,h.Z)(M);var O=d.Ry({name:d.Z_().required("Name is required"),lastName:d.Z_().required("LastName is required"),email:d.Z_().email("Invalid email").required("Email required"),password:d.Z_().required("Password required"),confirmPassword:d.Z_().when("password",{is:function(e){return!!(e&&e.length>0)},then:d.Z_().oneOf([d.iH("password")],"Both passwords have to be the same")}),fileImg:d.nK().required("Image is required").test("fileSize","Image is too large, use very small one",(function(e){return e&&e.size<=7500})).test("fileFormat","Please use image type png or jpeg",(function(e){return e&&S.includes(e.type)}))}),Y=function(){var t=l()(n().mark((function t(a,r){var s,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete a.fileImg,Boolean(M.current)&&(a.imageUrl=M.current),t.next=4,(0,E.Hd)(a);case 4:s=t.sent,l=s.data,200!==s.status?(e((0,f.PA)(l.alert,"registerForm")),Z(null)):(e((0,f.Ob)(l.success,"registerForm")),k(!0),Z(null)),M.current=null,r.resetForm();case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();(0,m.useEffect)((function(){return(a.successServerMsg||a.errorServerMsg)&&setTimeout((function(){R.current=e((0,f.a2)(null,null)),R.current=e((0,f.cJ)(null,null))}),1e3),function(){return clearTimeout(R.current)}}),[a.errorServerMsg,a.successServerMsg]),(0,m.useEffect)((function(){Boolean(t.fileImageRegister)&&Z(t.fileImageRegister.name)}),[t]);var z=function(){var e=l()(n().mark((function e(){var t,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={enableRegisterForm:!1},e.next=3,(0,E.mT)(t);case 3:a=e.sent,a.data,a.status;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){return i&&(z(),j.current=setTimeout((function(){return C.push("/login-admin")}),1200)),function(){return clearTimeout(j.current)}}),[i]);var D=function(e){var t=e.target,a=t.type,r=t.value;"text"===a&&""===r&&T(!1)},H=function(){T((function(e){return!e}))},L=function(t){var a=t.setFieldValue,r=t.setFieldTouched;return m.createElement("input",{type:"file",onChange:function(t){return function(t,a,r){r("fileImg");var n=(new Date).getTime().toString(),s=t.target.files[0];Object.defineProperty(s,"name",{value:s.name,writable:!0}),s.name="".concat(s.name,"-").concat(n),a("fileImg",s),Boolean(s)&&S.includes(s.type)&&s.size<=7500?e((0,p.Hj)(null,s,null,null,null)):e((0,p.jF)(null,null,null,null,null))}(t,a,r)},className:"register__input-file"})},U=function(e){return m.createElement("p",{className:"register__error-msg"},e.children)};return m.createElement(_.J9,{initialValues:{name:"",lastName:"",email:"",fileImg:"",password:"",confirmPassword:""},validationSchema:O,onSubmit:Y},(function(e){return m.createElement("section",{className:"register"},m.createElement("div",{className:"register__wrapper"},m.createElement("div",{className:"register__left"},!V&&m.createElement("div",{className:"register__overlay"},m.createElement(y.Z,null)),m.createElement("span",{className:"login__cover-left"}),V&&m.createElement("div",{className:"register__left-redirects"},m.createElement("h2",{className:"register__left-title"},"Sign up"),m.createElement("p",{className:"register__left-subtitle"},"Please fill in your details"),m.createElement("p",{className:"register__left-login-text"},"Already have an account?"),m.createElement(o.rU,{className:"register__left-login-button",to:"/login-admin"},"Sign in"))),m.createElement("div",{className:"register__right"},m.createElement(v.Z,null),m.createElement("h2",{className:"register__right-title"},"Sign Up"),m.createElement(_.l0,{className:"register__form"},Boolean(t.fileImageRegister)&&m.createElement(N.Z,{imgLink:M}),(!Boolean(Object.keys(e.errors).length)&&a.errorServerMsg,m.createElement(b.Z,null)),m.createElement("div",{className:"register__input-wrapper-name-surname"},m.createElement("div",{className:"register__wrapper-name"},m.createElement(_.Bc,{name:"name",component:U}),m.createElement("label",{className:"register__label"},"First name"),m.createElement(_.gN,{className:"register__input",name:"name",type:"text",placeholder:"Your name"}),m.createElement("span",{className:"register__icon"},m.createElement("i",{className:"far fa-user"}))),m.createElement("div",{className:"register__wrapper-surname"},m.createElement(_.Bc,{name:"lastName",component:U}),m.createElement("label",{className:"register__label"},"Last name"),m.createElement(_.gN,{className:"register__input",name:"lastName",type:"text",placeholder:"Your last name"}),m.createElement("span",{className:"register__icon"},m.createElement("i",{className:"far fa-user"})))),m.createElement("div",{className:"register__input-wrapper"},m.createElement(_.Bc,{name:"email",component:U}),m.createElement("label",{className:"register__label"},"Email"),m.createElement(_.gN,{className:"register__input",name:"email",type:"email",placeholder:"Your email"}),m.createElement("span",{className:"register__icon"},m.createElement("i",{className:"far fa-envelope"}))),m.createElement("div",{className:"register__input-file-add"},m.createElement(_.Bc,{name:"fileImg",component:U}),m.createElement("label",{className:"register__label-file"},"Choose File",m.createElement(_.gN,{as:L,name:"fileImg",type:"file",setFieldValue:e.setFieldValue,setFieldTouched:e.setFieldTouched})),B?m.createElement("span",{className:"register__file-name"},B):m.createElement("span",{className:"register__file-name"},"No file ...")),m.createElement("div",{className:"register__input-wrapper"},m.createElement(_.Bc,{name:"password",component:U}),m.createElement("label",{className:"register__label"},"Password"),m.createElement(_.gN,{className:"register__input",name:"password",type:"text",placeholder:"Your password"}),m.createElement("span",{className:"register__icon"},m.createElement("i",{className:"fas fa-lock"}))),m.createElement("div",{className:"register__input-wrapper"},m.createElement(_.Bc,{name:"confirmPassword",component:U}),m.createElement("label",{className:"register__label"},"Confirm Password"),m.createElement(_.gN,{className:"register__input",name:"confirmPassword",type:x?"text":"password",placeholder:"Confirm password",onClick:D}),m.createElement("span",{className:"register__icon",onClick:H},x?m.createElement("i",{className:"far fa-eye-slash"}):m.createElement("i",{className:"fas fa-eye"}))),m.createElement("button",{className:"register__button-register",type:"submit",disabled:!e.isValid},"Sign up")))))}))}))},96222:function(){}}]);