(self.webpackChunkbarbershop=self.webpackChunkbarbershop||[]).push([[6733],{96733:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var a=n(67154),i=n.n(a),r=n(87757),l=n.n(r),c=n(319),s=n.n(c),m=n(48926),u=n.n(m),o=n(63038),d=n.n(o),v=n(67294),f=n(16550),p=n(84751),_=n(62598),g=n(73406),b=(n(54720),[{nameClass:"admin-service__button",activeNameClass:"admin-service__button--active",nameTxt:"Card 1"},{nameClass:"admin-service__button",activeNameClass:"admin-service__button--active",nameTxt:"Card 2"},{nameClass:"admin-service__button",activeNameClass:"admin-service__button--active",nameTxt:"Card 3"}]),E=n(57722),N=n(60835),S=n(10461),h=["image/png","image/jpeg"],y=function(){var e=(0,p.I0)();return{handleFile:function(t,n,a){a("fileImg");var i=(new Date).getTime().toString(),r=t.target.files[0];Object.defineProperty(r,"name",{value:r.name,writable:!0}),r.name="".concat(r.name,"-").concat(i),n("fileImg",r),Boolean(r)&&h.includes(r.type)&&r.size<=9e4?e((0,N.Hj)(null,null,null,null,null,r,null)):e((0,N.jF)(null,null,null,null,null,null,null))}}},I=n(27285),O=n(76213),w=function(){var e=["image/png","image/jpeg"];return{initialValues:{fileImg:"",title:"",price:""},validationSchema:O.Ry({fileImg:O.nK().required("Image is required").test("fileSize","Image is too large, use very small one",(function(e){return e&&e.size<=9e4})).test("fileFormat","Please use image type png or jpeg",(function(t){return t&&e.includes(t.type)})),title:O.Z_().required("Title is required"),price:O.Z_().required("Price is required")})}},j=n(22584),F=n(16431),P=n(41691),C=n(73680),k=(n(37533),n(59713)),x=n.n(k),T=(n(24725),function(){var e=["image/png","image/jpeg"];return{initialValues:{fileImg:"",title:"",price:""},validationSchema:O.Ry({fileImg:O.nK().required("Image is required").test("fileSize","Image is too large, use very small one",(function(e){return e&&e.size<=9e4})).test("fileFormat","Please use image type png or jpeg",(function(t){return t&&e.includes(t.type)})),title:O.Z_().required("Title is required"),price:O.Z_().required("Price is required")})}}),B=["image/png","image/jpeg"],D=function(){var e=(0,p.I0)();return{handleEditServiceFile:function(t,n,a){a("fileImg");var i=(new Date).getTime().toString(),r=t.target.files[0];Object.defineProperty(r,"name",{value:r.name,writable:!0}),r.name="".concat(r.name,"-").concat(i),n("fileImg",r),Boolean(r)&&B.includes(r.type)&&r.size<=9e4?e((0,N.Hj)(null,null,null,null,null,null,r)):e((0,N.jF)(null,null,null,null,null,null,null))}}},V=n(72323),Z=n(65467);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t=e.currentServices,n=e.idRow,a=e.imageUrl,i=e.imamgeNewEditLink,r=e.setCurrentServices,c=e.setIsVisiblePanel,s=e.title,m=e.price,o=e.setIsSubmit,f={title:s,price:m,fileImg:""},b=(0,p.I0)(),E=(0,p.v9)((function(e){return e.useAdminData})),N=(0,p.v9)((function(e){return e.fileDate})),S=(0,v.useState)(f),h=d()(S,2),y=h[0],I=h[1],O=T(),w=O.initialValues,F=O.validationSchema;(0,j.Z)();var C=D().handleEditServiceFile,k=(0,V.Z)().deleteImgFirebase,x=(0,v.useState)(null),B=d()(x,2),R=B[0],A=B[1],U=function(){var e=u()(l().mark((function e(s,m){var u,d,v,f,p,_;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete s.fileImg,s.id=n,s.imageUrl=i.current,e.next=5,(0,Z.ug)(s);case 5:u=e.sent,d=u.data,v=u.status,f=d.service,200!==v?(b((0,g.PA)(d.alert,"default")),A(null)):(b((0,g.Ob)(d.success,"default")),c(!1),A(null),o(!0),k(a),p=t.map((function(e){return e._id===f._id?q(q({},e),{},{imageUrl:f.imageUrl,title:f.title,price:f.price}):e})),r(p),_={title:f.title,price:f.price.toFixed(2),fileImg:""},I(_)),i.current=null,m.resetForm();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){Boolean(N.fileEditImageService)&&A(N.fileEditImageService.name)}),[N]);var L=function(e){var t=e.setFieldValue,n=e.setFieldTouched;return v.createElement("input",{type:"file",onChange:function(e){return C(e,t,n)},className:"admin-service__input-file"})},z=function(e){return v.createElement("p",{className:"admin-service__error-msg-edit"},e.children)};return v.createElement(_.J9,{enableReinitialize:!0,initialValues:y||w,validationSchema:F,validateOnBlur:!1,onSubmit:U},(function(e){return v.createElement("div",{className:"admin-service__edit-form-wrapper"},Boolean(N.fileEditImageService)&&v.createElement(P.Z,{imamgeNewEditLink:i}),v.createElement(_.l0,{className:"admin-service__form-edit",onSubmit:e.handleSubmit},v.createElement(_.Bc,{name:"fileImg",component:z}),v.createElement("div",{className:"admin-service__input-file-add"},v.createElement("label",{className:"admin-service__label-file"},"Choose File",v.createElement(_.gN,{as:L,name:"fileImg",type:"file",setFieldValue:e.setFieldValue,setFieldTouched:e.setFieldTouched})),R?v.createElement("span",{className:"admin-service__file-name"},R):v.createElement("span",{className:"admin-service__file-name"},"No file ...")),v.createElement(_.Bc,{name:"title",component:z}),v.createElement(_.gN,{type:"text",name:"title",className:"admin-service__form-input",placeholder:"Title"}),v.createElement(_.Bc,{name:"price",component:z}),v.createElement(_.gN,{type:"number",name:"price",className:"admin-service__form-input",placeholder:"Price",min:"1",step:"any"}),v.createElement("button",{className:"admin-service__button-add-image",type:"submit",disabled:!E.enableServices||!e.isValid},"Edit Service")))}))},U=n(35248),L=n(6841),z=function(e){var t=e._id,n=e.idService,a=e.imageUrl,i=e.imgUrl,r=e.imamgeNewEditLink,l=e.currentServices,c=e.setCurrentServices,s=e.setIdService,m=e.setIsOpenModal,u=e.setIsSubmit,o=e.title,f=e.price,p=(0,v.useState)(""),_=d()(p,2),g=_[0],b=_[1],E=(0,v.useState)(!1),N=d()(E,2),S=N[0],h=N[1],y=(0,U.Z)(a);return v.createElement("div",{className:"admin-service__row"},v.createElement("div",{className:"admin-service__row-service"},v.createElement("div",{className:"admin-service__image-frame",style:{backgroundImage:"url(".concat(a,")")}},!y&&v.createElement("div",{className:"admin-service__overlay"},v.createElement(L.Z,null))),v.createElement("div",{className:"admin-service__text-wrapper"},v.createElement("p",{className:"admin-service__text-span-1"},"Service:"),v.createElement("p",{className:"admin-service__text-1"}," ",o)),v.createElement("div",{className:"admin-service__text-wrapper"},v.createElement("p",{className:"admin-service__text-span-2"},"Price:"),v.createElement("p",{className:"admin-service__text-2"},f.toFixed(2),"â‚¬")),v.createElement("div",{className:"admin-service__buttons-wrapper"},v.createElement("button",{className:S?"admin-service__edit admin-service__edit--active":"admin-service__edit",onClick:function(){h((function(e){return!e})),s(""),b(t)}},v.createElement("i",{className:"far fa-edit"})),v.createElement("button",{className:n===g&&n&&""!==g?"admin-service__delete admin-service__delete--active":"admin-service__delete",onClick:function(){b(t),s(t),m(!0),h(!1),i.current=a}},v.createElement("i",{className:"far fa-trash-alt"})))),v.createElement("div",{className:S?"admin-service__panel-edit admin-service__panel-edit--active":"admin-service__panel-edit"},v.createElement(A,{currentServices:l,setCurrentServices:c,setIsVisiblePanel:h,idRow:g,imamgeNewEditLink:r,imageUrl:a,title:o,price:f,setIsSubmit:u})))};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var H=function(e,t,n,a,i){var r=(0,V.Z)().deleteImgFirebase,c=(0,p.I0)(),m=function(){var t=[];return e.forEach((function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);t=[].concat(s()(t),[n])})),t};return{handleRemoveItem:function(){var e=u()(l().mark((function e(){var s,u,o,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.kp)(t);case 2:s=e.sent,u=s.data,200===s.status?(r(n.current),c((0,g.Ob)(u.success,"removeAtTableAdmin")),o=m(),d=o.filter((function(e){return e._id!==t})),a(d),i(!1)):c((0,g.PA)(u.alert,"removeAtTableAdmin"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},J=function(){var e=w(),t=e.initialValues,n=e.validationSchema,a=y().handleFile;(0,j.Z)();var r=(0,p.I0)(),c=(0,p.v9)((function(e){return e.useAdminData})),m=(0,p.v9)((function(e){return e.alertData})),o=(0,p.v9)((function(e){return e.fileDate})),h=(0,p.v9)((function(e){return e.serviceData})).services,O=(0,v.useState)("card 1"),k=d()(O,2),x=k[0],T=k[1],B=(0,v.useState)([]),D=d()(B,2),V=D[0],R=D[1],q=(0,v.useState)(""),A=d()(q,2),U=A[0],L=A[1],M=(0,v.useState)(!1),J=d()(M,2),K=J[0],Q=J[1],W=(0,v.useState)("men"),G=d()(W,2),X=G[0],Y=G[1],$=(0,v.useState)(0),ee=d()($,2),te=ee[0],ne=ee[1],ae=(0,v.useState)(!1),ie=d()(ae,2),re=ie[0],le=ie[1],ce=(0,v.useState)(null),se=d()(ce,2),me=se[0],ue=se[1],oe=(0,v.useState)(!1),de=d()(oe,2),ve=de[0],fe=de[1],pe=(0,v.useRef)(null),_e=(0,v.useRef)(null),ge=(0,v.useRef)(null),be=(0,f.k6)();(0,I.Z)(_e);var Ee=H(V,U,pe,R,le).handleRemoveItem,Ne=function(){var e=u()(l().mark((function e(t,n){var a,i,c,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete t.fileImg,t.gender=X,t.card=x,t.imageUrl=_e.current,e.next=6,(0,Z.lx)(t);case 6:a=e.sent,i=a.data,c=a.status,delete(m=i.service).__v,200!==c?(r((0,g.PA)(i.alert,"default")),ue(null)):(r((0,g.Ob)(i.success,"default")),R([].concat(s()(V),[m])),ue(null)),_e.current=null,n.resetForm();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){le(!1),L("")},he=function(){Q(!1),Y("men"),ne(0),T("card 1")},ye=function(){Q(!0),Y("women"),ne(0),T("card 1")};(0,v.useEffect)((function(){Boolean(o.fileImageService)&&ue(o.fileImageService.name)}),[o]),(0,v.useEffect)((function(){var e={gender:X,card:x};r((0,E.Qz)(e))}),[x,r,X]),(0,v.useEffect)((function(){R(h)}),[h]),(0,v.useEffect)((function(){be.listen((function(){if("/admin/service"!==be.location.pathname&&ge.current&&-1!==ge.current.indexOf("firebasestorage")){var e=S.v.refFromURL(ge.current);ge.current=null,r((0,N.jF)(null,null,null,null,null,null)),e.delete().then((function(e){return e})).catch((function(e){setErrMsg(e)}))}}))}),[ve,ge.current]);var Ie=function(e){var t=e.setFieldValue,n=e.setFieldTouched;return v.createElement("input",{type:"file",onChange:function(e){return a(e,t,n)},className:"admin-service__input-file"})},Oe=function(e){return v.createElement("p",{className:"admin-service__error-msg"},e.children)};return v.createElement(_.J9,{initialValues:t,validationSchema:n,onSubmit:Ne},(function(e){return v.createElement("article",{className:"admin-service"},v.createElement("div",{className:"admin-service__wrapper"},v.createElement("div",{className:"admin-service__wrapper-buttons"},v.createElement("button",{className:K?"admin-service__button":"admin-service__button admin-service__button--active",onClick:he},"Men"),v.createElement("button",{className:K?"admin-service__button admin-service__button--active":"admin-service__button",onClick:ye},"Women"),b.map((function(e,t){return v.createElement("button",{className:te===t?"".concat(e.activeNameClass," ").concat(e.nameClass):e.nameClass,key:t,onClick:function(e){return function(e,t){var n=e.target.innerHTML.toLowerCase();T(n),ne(t)}(e,t)}},e.nameTxt)}))),Boolean(o.fileImageService)&&v.createElement(P.Z,{imgLink:_e}),(!Boolean(Object.keys(e.errors).length)&&m.errorServerMsg,v.createElement(F.Z,null)),Boolean(V)&&V.length<4&&v.createElement(_.l0,{className:"admin-service__wrapper-form-add",onSubmit:e.handleSubmit},v.createElement(_.Bc,{name:"fileImg",component:Oe}),v.createElement("div",{className:"admin-service__input-file-add"},v.createElement("label",{className:"admin-service__label-file"},"Choose File",v.createElement(_.gN,{as:Ie,name:"fileImg",type:"file",setFieldValue:e.setFieldValue,setFieldTouched:e.setFieldTouched})),me?v.createElement("span",{className:"admin-service__file-name"},me):v.createElement("span",{className:"admin-service__file-name"},"No file ...")),v.createElement(_.Bc,{name:"title",component:Oe}),v.createElement(_.gN,{type:"text",name:"title",className:"admin-service__form-input",placeholder:"Title"}),v.createElement(_.Bc,{name:"price",component:Oe}),v.createElement(_.gN,{type:"number",name:"price",className:"admin-service__form-input",placeholder:"Price",min:"1",step:"any"}),v.createElement("button",{className:"admin-service__button-add-image",type:"submit",disabled:!c.enableServices||!e.isValid},"Add Service")),v.createElement("div",{className:"admin-service__header"},v.createElement("p",{className:"admin-service__number"},"Total number:"," ",Boolean(V)?V.length:null),v.createElement("p",{className:"admin-service__action"},"Action")),v.createElement("div",{className:"admin-service__wrapper-images"},Boolean(V)&&V.map((function(e,t){return v.createElement(z,i()({key:e._id},e,{setIdService:L,idService:U,imgUrl:pe,setIsOpenModal:le,currentServices:V,setCurrentServices:R,setIsSubmit:fe,imamgeNewEditLink:ge}))})))),v.createElement(C.Z,{enableAction:c.enableServices,isOpenModal:re,handleRemoveItem:Ee,handleNotRemoveItem:Se,purpose:"service"}))}))}},54720:function(){},24725:function(){},37533:function(){}}]);